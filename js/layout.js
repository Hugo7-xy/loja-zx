import { createSlug } from './utils.js';
const routes = { '/': 'products-page', '/canais': 'channels-page', '/referencias': 'references-page', '/admin': 'master-dashboard-page' };
function showPage(pageId) { const pages = document.querySelectorAll('.page-content'); pages.forEach(page => page.classList.add('hidden')); const targetPage = document.getElementById(pageId); if (targetPage) { targetPage.classList.remove('hidden'); } const navLinks = document.querySelectorAll('.nav-link'); navLinks.forEach(link => { if (link.dataset.target === pageId) { link.classList.add('active'); } else { link.classList.remove('active'); } }); }
export function handleRouting() { const path = window.location.pathname; if (path.startsWith('/vendedor/')) { const slug = path.substring('/vendedor/'.length); showPage('products-page'); document.dispatchEvent(new CustomEvent('routeToVendor', { detail: { slug } })); } else { const pageId = routes[path] || 'products-page'; showPage(pageId); if (pageId === 'products-page') { document.dispatchEvent(new CustomEvent('routeToVendor', { detail: { slug: 'all' } })); } } }
function setupNavigation() { const navLinks = document.querySelectorAll('.nav-link'); navLinks.forEach(link => { link.addEventListener('click', (event) => { event.preventDefault(); const path = link.getAttribute('href'); history.pushState({}, '', path); handleRouting(); }); }); }
function setupAccordion() { const accordionHeaders = document.querySelectorAll('.accordion-header'); accordionHeaders.forEach(header => { header.addEventListener('click', () => { header.classList.toggle('active'); const content = header.nextElementSibling; if (content.style.maxHeight) { content.style.maxHeight = null; } else { content.style.maxHeight = content.scrollHeight + "px"; } }); }); }
function setupModals() { document.body.addEventListener('click', (event) => { const modalTrigger = event.target.closest('[data-modal-target]'); if (modalTrigger) { event.preventDefault(); const modalId = modalTrigger.dataset.modalTarget; const modal = document.getElementById(modalId); if (modal) { modal.classList.remove('hidden'); } } }); document.body.addEventListener('click', (event) => { const target = event.target; if (target.matches('[class*="close-btn"]') || target.classList.contains('modal-overlay')) { const modal = target.closest('.modal-overlay'); if (modal) { modal.classList.add('hidden'); } } }); }
export function initLayout() { console.log("Módulo de Layout (com roteamento dinâmico) inicializado."); setupAccordion(); setupModals(); setupNavigation(); document.addEventListener('productsLoaded', handleRouting); window.addEventListener('popstate', handleRouting); }
